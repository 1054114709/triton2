#!/bin/bash

if [ $# != 6 ]; then
	echo "cannt find enough parame"
	exit;
fi;

#CONNECT_STR=$1

DUMP_HOME=./dump
DBHOST=$1
DBPORT=$2
DAY=$6
# `date "+%Y%m%d"`
MYSQL=/usr/local/mysql/bin/mysqldump
DATABASE=$5
DBUSER=$3
DBPASSWD=$4;
#just for table num between 1~16
Begin=1
Max=16
echo -n "Create log tables begin, please wait"
i=$Begin

while [ $i -le $Max ]
do
	if [ "$i" -lt "10" ]
	then
		realtab='0'$i
	else
		realtab=$i
 	fi

	echo -n "."
	$MYSQL -h$DBHOST -P$DBPORT -u$DBUSER -p$DBPASSWD $DATABASE.${DAY}_LOG_ROLE_LOGOUT_$realtab > $DUMP_HOME/${DAY}_LOG_ROLE_LOGOUT_$realtab;
	$MYSQL -h$DBHOST -P$DBPORT -u$DBUSER -p$DBPASSWD $DATABASE.${DAY}_LOG_ROLE_ITEM_$realtab > $DUMP_HOME/${DAY}_LOG_ROLE_ITEM_$realtab;
	$MYSQL -h$DBHOST -P$DBPORT -u$DBUSER -p$DBPASSWD $DATABASE.${DAY}_LOG_ROLE_MONEY_$realtab > $DUMP_HOME/${DAY}_LOG_ROLE_MONEY_$realtab;
	$MYSQL -h$DBHOST -P$DBPORT -u$DBUSER -p$DBPASSWD $DATABASE.${DAY}_LOG_ROLE_EXP_$realtab > $DUMP_HOME/${DAY}_LOG_ROLE_EXP_$realtab;
	$MYSQL -h$DBHOST -P$DBPORT -u$DBUSER -p$DBPASSWD $DATABASE.${DAY}_LOG_ROLE_UPGRADE_$realtab > $DUMP_HOME/${DAY}_LOG_ROLE_UPGRADE_$realtab;
	$MYSQL -h$DBHOST -P$DBPORT -u$DBUSER -p$DBPASSWD $DATABASE.${DAY}_LOG_ROLE_TASK_$realtab > $DUMP_HOME/${DAY}_LOG_ROLE_TASK_$realtab;
	$MYSQL -h$DBHOST -P$DBPORT -u$DBUSER -p$DBPASSWD $DATABASE.${DAY}_LOG_ROLE_KILLED_$realtab > $DUMP_HOME/${DAY}_LOG_ROLE_KILLED_$realtab;
	$MYSQL -h$DBHOST -P$DBPORT -u$DBUSER -p$DBPASSWD $DATABASE.${DAY}_LOG_ITEM_UPGRADE_$realtab > $DUMP_HOME/${DAY}_LOG_ITEM_UPGRADE_$realtab;
		

	let "i= $i + 1"
done

	realtab='01'	

	$MYSQL -h$DBHOST -P$DBPORT -u$DBUSER -p$DBPASSWD $DATABASE.${DAY}_LOG_ITEM_DISPEAR_$realtab >  $DUMP_HOME/${DAY}_LOG_ITEM_DISPEAR_$realtab;
	$MYSQL -h$DBHOST -P$DBPORT -u$DBUSER -p$DBPASSWD $DATABASE.${DAY}_LOG_ORGE_DROPED_$realtab > $DUMP_HOME/${DAY}_LOG_ORGE_DROPED_$realtab;
	$MYSQL -h$DBHOST -P$DBPORT -u$DBUSER -p$DBPASSWD $DATABASE.${DAY}_LOG_FAMILY_$realtab > $DUMP_HOME/${DAY}_LOG_FAMILY_$realtab;
	$MYSQL -h$DBHOST -P$DBPORT -u$DBUSER -p$DBPASSWD $DATABASE.${DAY}_LOG_CORPS_$realtab > $DUMP_HOME/${DAY}_LOG_CORPS_$realtab ;
	$MYSQL -h$DBHOST -P$DBPORT -u$DBUSER -p$DBPASSWD $DATABASE.${DAY}_LOG_ROLE_MAIL_$realtab > $DUMP_HOME/${DAY}_LOG_ROLE_MAIL_$realtab ;
	$MYSQL -h$DBHOST -P$DBPORT -u$DBUSER -p$DBPASSWD $DATABASE.${DAY}_LOG_ROLE_CHAT_$realtab > $DUMP_HOME/${DAY}_LOG_ROLE_CHAT_$realtab ;
	$MYSQL -h$DBHOST -P$DBPORT -u$DBUSER -p$DBPASSWD $DATABASE.${DAY}_LOG_SERVER_STAT_$realtab > $DUMP_HOME/${DAY}_LOG_SERVER_STAT_$realtab ;
	$MYSQL -h$DBHOST -P$DBPORT -u$DBUSER -p$DBPASSWD $DATABASE.${DAY}_LOG_MONEY_PRODUCE_$realtab > $DUMP_HOME/${DAY}_LOG_MONEY_PRODUCE_$realtab ;
	$MYSQL -h$DBHOST -P$DBPORT -u$DBUSER -p$DBPASSWD $DATABASE.${DAY}_LOG_MONEY_RECYCLE_$realtab > $DUMP_HOME/${DAY}_LOG_MONEY_RECYCLE_$realtab ;
	$MYSQL -h$DBHOST -P$DBPORT -u$DBUSER -p$DBPASSWD $DATABASE.${DAY}_LOG_EXP_PRODUCE_$realtab  > $DUMP_HOME/${DAY}_LOG_EXP_PRODUCE_$realtab  ;
	$MYSQL -h$DBHOST -P$DBPORT -u$DBUSER -p$DBPASSWD $DATABASE.${DAY}_LOG_ITEM_PRODUCE_$realtab > $DUMP_HOME/${DAY}_LOG_ITEM_PRODUCE_$realtab ;		
	$MYSQL -h$DBHOST -P$DBPORT -u$DBUSER -p$DBPASSWD $DATABASE.${DAY}_LOG_ITEM_RECYCLE_$realtab > $DUMP_HOME/${DAY}_LOG_ITEM_RECYCLE_$realtab ;
	$MYSQL -h$DBHOST -P$DBPORT -u$DBUSER -p$DBPASSWD $DATABASE.${DAY}_LOG_ACTION_MONIT_$realtab > $DUMP_HOME/${DAY}_LOG_ACTION_MONIT_$realta ;
	
echo "create sccuess !"
